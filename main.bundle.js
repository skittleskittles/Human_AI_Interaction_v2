(()=>{var t,e=600,n=0,o=-1,r=[];function a(){var t=document.querySelectorAll(".box"),e=Array.from(t).every((function(t){return t.children.length>0}));document.getElementById("submit-btn").disabled=!e}function c(){var t=document.querySelectorAll(".option"),e=document.getElementById("option-container"),n=Array.from(t).every((function(t){return e.contains(t)}));document.getElementById("reset-btn").disabled=n}window.allowDrop=function(t){t.preventDefault()},window.drag=function(t){t.dataTransfer.setData("text",t.target.id),c()},window.drop=function(t){t.preventDefault();var e=t.dataTransfer.getData("text"),o=document.getElementById(e),r=t.target;if(!r.classList.contains("box")&&r.parentElement.classList.contains("box")&&(r=r.parentElement),r.classList.contains("box")){var d=o.parentElement,i=r.firstElementChild;r!==d&&(i&&d.appendChild(i),r.appendChild(o),n++,document.getElementById("steps").textContent=n,a(),c())}},window.submitTrial=function(){var t=document.querySelectorAll(".box"),e=Array.from(t).map((function(t){return t.children.length?t.children[0].id:null})),a=r[o],c=0;a.answer.forEach((function(t,n){e[n]===t&&c++}));var d=Math.round(c/a.answer.length*100);document.getElementById("accuracy").textContent="".concat(d,"%"),n++,document.getElementById("steps").textContent=n,document.getElementById("submit-btn").disabled=100===d,document.getElementById("next-btn").disabled=!1},window.reset=function(){var t=r[o];document.querySelectorAll(".box").forEach((function(t){return t.innerHTML=""})),document.getElementById("option-container").innerHTML=t.people.map((function(t){return'<div class="option" draggable="true" id="'.concat(t,'" ondragstart="drag(event)">').concat(t,"</div>")})).join(""),a(),c(),n++,document.getElementById("steps").textContent=n},window.nextTrial=function(){if(++o>=r.length)alert("All trials completed!");else{var t=r[o],e=document.getElementById("dropZone");e.innerHTML="",t.answer.forEach((function(){var t=document.createElement("div");t.className="box",t.setAttribute("ondrop","drop(event)"),t.setAttribute("ondragover","allowDrop(event)"),e.appendChild(t)})),document.getElementById("option-container").innerHTML=t.people.map((function(t){return'<div class="option" draggable="true" id="'.concat(t,'" ondragstart="drag(event)">').concat(t,"</div>")})).join(""),document.querySelector("#statement-box ul").innerHTML=t.statements.map((function(t){return"<li>".concat(t,"</li>")})).join(""),document.getElementById("accuracy").textContent="--",n=0,document.getElementById("steps").textContent=n,document.getElementById("next-btn").disabled=!0,a(),c()}},fetch("questions.json").then((function(t){if(!t.ok)throw new Error("HTTP error: ".concat(t.status));return t.json()})).then((function(n){r=n,nextTrial(),t=setInterval((function(){if(e<=0)return clearInterval(t),void(document.getElementById("timer").textContent="00:00");e--;var n=String(Math.floor(e/60)).padStart(2,"0"),o=String(e%60).padStart(2,"0");document.getElementById("timer").textContent="".concat(n,":").concat(o)}),1e3)}))})();