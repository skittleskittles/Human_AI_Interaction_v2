(()=>{"use strict";var e={timer:1200,interval:null,steps:0,submissionLimit:3,remainingSubmissions:3,performance:{correctChoice:0,accuracy:0,correctTrialCount:0}};function t(){e.steps++}function n(){return e.remainingSubmissions}function r(){return e.performance.accuracy}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.correctChoice,r=void 0===n?0:n,o=t.accuracy,c=void 0===o?0:o;e.performance.correctChoice=r,e.performance.accuracy=c}function c(){var t,o,c,i,a=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).forceEnableNext,l=void 0===a?e.remainingSubmissions!==e.submissionLimit:a,u=document.querySelectorAll(".box"),d=Array.from(u).every((function(e){return e.children.length>0})),s=document.querySelectorAll(".option"),m=document.getElementById("option-container"),f=Array.from(s).every((function(e){return m.contains(e)}));o=(t={submit:d&&n()>0&&100!==r(),reset:!f&&n()>0&&100!==r(),next:l}).submit,c=t.reset,i=t.next,document.getElementById("submit-btn").disabled=!o,document.getElementById("reset-btn").disabled=!c,document.getElementById("next-btn").disabled=!i}function i(){document.getElementById("result-content").style.display="none"}function a(){document.querySelectorAll(".option").forEach((function(e){e.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text",e.target.id)}))})),function(){var e=document.getElementById("box-container");e.replaceWith(e.cloneNode(!0));var n=document.getElementById("box-container");n.addEventListener("dragover",(function(e){(e.target.classList.contains("box")||e.target.closest(".box"))&&e.preventDefault()})),n.addEventListener("drop",(function(e){e.preventDefault();var n,r=(n=e.target).classList.contains("box")?n:n.closest(".box");if(r){var o=e.dataTransfer.getData("text"),a=document.getElementById(o),l=a.parentElement;if(r!==l){var u=r.firstElementChild;u&&l.appendChild(u),r.appendChild(a),t(),c(),i()}}}))}()}var l=[],u=-1;function d(){if(!(n()<=0)){var i=function(e,t){for(var n=0,r=t.length,o=0,c=0;c<r;c++){var i=e.indexOf(t[c]);-1!==i&&(o+=(r-Math.abs(i-c))/r,i===c&&n++)}var a=o/r*100;return{correctChoice:n,accuracy:Number(a%1==0?a.toFixed(0):a.toFixed(1))}}(Array.from(document.querySelectorAll(".box")).map((function(e){return e.children.length?e.children[0].id:null})),l[u].answer);a=i.correctChoice,d=i.accuracy,o({correctChoice:a,accuracy:d}),100===d&&e.performance.correctTrialCount++,document.getElementById("result-content").style.display="block",document.getElementById("correct-choice").textContent=e.performance.correctChoice,document.getElementById("accuracy").textContent="".concat(r(),"%"),document.getElementById("correct-trials").textContent=e.performance.correctTrialCount,t(),e.remainingSubmissions>0&&e.remainingSubmissions--,s(),c({forceEnableNext:!0})}var a,d}function s(){var e=document.getElementById("submission-count");e&&(e.textContent=n())}function m(){var e=l[u];document.querySelectorAll(".box").forEach((function(e){return e.innerHTML=""})),f(e.people),t(),c()}function f(e){document.getElementById("option-container").innerHTML=e.map((function(e){return'<div class="option" draggable="true" id="'.concat(e,'">').concat(e,"</div>")})).join(""),a()}function v(){if(!(++u>=l.length&&(alert("All trials completed!"),1))){var t,n=l[u];!function(e){var t=document.getElementById("label-container");t.innerHTML="";for(var n=1;n<=e;n++){var r=document.createElement("div");r.className="label",r.textContent=n,t.appendChild(r)}var o=document.getElementById("box-container");o.innerHTML="";for(var c=0;c<e;c++){var i=document.createElement("div");i.className="box",o.appendChild(i)}a()}(n.answer.length),f(n.people),t=n.statements,document.querySelector("#statement-box ul").innerHTML=t.map((function(e){return"<li>".concat(e,"</li>")})).join(""),function(e){var t=document.getElementById("left-label"),n=document.getElementById("right-label"),r=e.some((function(e){return e.includes("shorter")||e.includes("taller")})),o=e.some((function(e){return e.includes("younger")||e.includes("older")}));r?(t.textContent="short",n.textContent="tall"):o?(t.textContent="young",n.textContent="old"):(t.textContent="front",n.textContent="end")}(n.statements),i(),e.steps=0,e.remainingSubmissions=e.submissionLimit,o(),s(),c()}}fetch("questions.json").then((function(e){return e.json()})).then((function(t){!function(e){l=e}(t),document.getElementById("submit-btn").addEventListener("click",d),document.getElementById("reset-btn").addEventListener("click",m),document.getElementById("next-btn").addEventListener("click",v),v(),e.interval=setInterval((function(){if(e.timer<=0)return clearInterval(e.interval),document.getElementById("timer").textContent="00:00",document.getElementById("submit-btn").disabled=!0,document.getElementById("reset-btn").disabled=!0,document.getElementById("next-btn").disabled=!0,document.querySelectorAll(".option").forEach((function(e){e.setAttribute("draggable","false"),e.style.cursor="not-allowed"})),document.querySelectorAll(".box").forEach((function(e){e.removeEventListener("dragover",preventDefaultDragOver),e.removeEventListener("drop",handleDrop)})),void alert("Time is up! Submissions are now closed.");e.timer--;var t=String(Math.floor(e.timer/60)).padStart(2,"0"),n=String(e.timer%60).padStart(2,"0");document.getElementById("timer").textContent="".concat(t,":").concat(n)}),1e3)}))})();