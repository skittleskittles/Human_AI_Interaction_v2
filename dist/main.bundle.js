(()=>{"use strict";var e={timer:1200,interval:null,steps:0,submissionLimit:3,remainingSubmissions:3};function t(){e.steps++}function n(){return e.remainingSubmissions}function o(){var e,t,o,r,i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).forceEnableNext,c=void 0!==i&&i,a=document.querySelectorAll(".box"),l=Array.from(a).every((function(e){return e.children.length>0})),d=document.querySelectorAll(".option"),u=document.getElementById("option-container"),s=Array.from(d).every((function(e){return u.contains(e)}));t=(e={submit:l&&n()>0,reset:!s,next:c||!1===document.getElementById("next-btn").disabled}).submit,o=e.reset,r=e.next,document.getElementById("submit-btn").disabled=!t,document.getElementById("reset-btn").disabled=!o,document.getElementById("next-btn").disabled=!r}function r(){document.getElementById("result-content").style.display="none"}function i(){document.querySelectorAll(".option").forEach((function(e){e.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text",e.target.id)}))})),function(){var e=document.getElementById("box-container");e.replaceWith(e.cloneNode(!0));var n=document.getElementById("box-container");n.addEventListener("dragover",(function(e){(e.target.classList.contains("box")||e.target.closest(".box"))&&e.preventDefault()})),n.addEventListener("drop",(function(e){e.preventDefault();var n,i=(n=e.target).classList.contains("box")?n:n.closest(".box");if(i){var c=e.dataTransfer.getData("text"),a=document.getElementById(c),l=a.parentElement;if(i!==l){var d=i.firstElementChild;d&&l.appendChild(d),i.appendChild(a),t(),o(),r()}}}))}()}var c=[],a=-1;function l(){if(!(n()<=0)){var r=function(e,t){for(var n=0,o=t.length,r=0,i=0;i<o;i++){var c=e.indexOf(t[i]);-1!==c&&(r+=(o-Math.abs(c-i))/o,c===i&&n++)}return{correctCount:n,accuracy:(r/o*100).toFixed(1)}}(Array.from(document.querySelectorAll(".box")).map((function(e){return e.children.length?e.children[0].id:null})),c[a].answer);i=r.correctCount,l=r.accuracy,function(e,t){document.getElementById("result-content").style.display="block",document.getElementById("correct-count").textContent=e,document.getElementById("accuracy").textContent="".concat(t,"%")}(i,l),t(),e.remainingSubmissions>0&&e.remainingSubmissions--,d(),o({forceEnableNext:!0})}var i,l}function d(){var e=document.getElementById("submission-count");e&&(e.textContent=n())}function u(){var e=c[a];document.querySelectorAll(".box").forEach((function(e){return e.innerHTML=""})),s(e.people),t(),o()}function s(e){document.getElementById("option-container").innerHTML=e.map((function(e){return'<div class="option" draggable="true" id="'.concat(e,'">').concat(e,"</div>")})).join(""),i()}function m(){if(!(++a>=c.length&&(alert("All trials completed!"),1))){var t,n=c[a];!function(e){var t=document.querySelector(".label-row");t.innerHTML="";for(var n=1;n<=e;n++){var o=document.createElement("div");o.className="label",o.textContent=n,t.appendChild(o)}var r=document.getElementById("box-container");r.innerHTML="";for(var c=0;c<e;c++){var a=document.createElement("div");a.className="box",r.appendChild(a)}i()}(n.answer.length),s(n.people),t=n.statements,document.querySelector("#statement-box ul").innerHTML=t.map((function(e){return"<li>".concat(e,"</li>")})).join(""),function(e){var t=document.getElementById("left-label"),n=document.getElementById("right-label"),o=e.some((function(e){return e.includes("shorter")||e.includes("taller")})),r=e.some((function(e){return e.includes("younger")||e.includes("older")}));o?(t.textContent="short",n.textContent="tall"):r?(t.textContent="young",n.textContent="old"):(t.textContent="front",n.textContent="end")}(n.statements),r(),e.steps=0,e.remainingSubmissions=e.submissionLimit,d(),o()}}fetch("questions.json").then((function(e){return e.json()})).then((function(t){!function(e){c=e}(t),document.getElementById("submit-btn").addEventListener("click",l),document.getElementById("reset-btn").addEventListener("click",u),document.getElementById("next-btn").addEventListener("click",m),m(),e.interval=setInterval((function(){if(e.timer<=0)return clearInterval(e.interval),document.getElementById("timer").textContent="00:00",document.getElementById("submit-btn").disabled=!0,document.getElementById("reset-btn").disabled=!0,document.getElementById("next-btn").disabled=!0,document.querySelectorAll(".option").forEach((function(e){e.setAttribute("draggable","false"),e.style.cursor="not-allowed"})),document.querySelectorAll(".box").forEach((function(e){e.removeEventListener("dragover",preventDefaultDragOver),e.removeEventListener("drop",handleDrop)})),void alert("Time is up! Submissions are now closed.");e.timer--;var t=String(Math.floor(e.timer/60)).padStart(2,"0"),n=String(e.timer%60).padStart(2,"0");document.getElementById("timer").textContent="".concat(t,":").concat(n)}),1e3)}))})();